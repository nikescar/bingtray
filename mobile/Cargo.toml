[package]
name = "mobile"
version.workspace = true
license.workspace = true
edition.workspace = true
rust-version.workspace = true

[features]
default = ["serde"]
desktop = []
serde = ["dep:serde", "dep:serde_json"]

[lib]
name = "bingtray_mobile"
crate-type = ["cdylib", "rlib"]

# No binary target - this is a library only

[dependencies]
log = { workspace = true }
bingtray-core = { path = "../bingtray-core", features = ["serde"] }
egui = { workspace = true }
eframe = { workspace = true }
egui_extras = { workspace = true }
serde = { version = "1.0", default-features = false, features = ["derive"], optional = true }
serde_json = { version = "1.0", default-features = false, optional = true }
wgpu = { workspace = true }

[target.'cfg(target_os = "android")'.dependencies]
ndk-context = { version = "0.1", default-features = false }
jni = { version = "0.21", default-features = false }
android_logger = { version = "0.15", default-features = false }
android-activity = { version = "0.6", default-features = false, features = ["native-activity"] }
ndk-sys = { version = "0.6.0", default-features = false }

[target.'cfg(target_os = "ios")'.dependencies]
bevy = { version = "0.16.0", default-features = false, features = ["bevy_render", "bevy_core_pipeline", "bevy_sprite", "bevy_text", "bevy_ui", "bevy_winit"], optional = true }
bevy_egui = { version = "0.35.1", default-features = false, optional = true }
objc2-avf-audio = { version = "0.3.0", features = ["AVAudioSession", "AVAudioSessionTypes"] }
