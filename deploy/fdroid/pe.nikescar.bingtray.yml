# this manifest is for the F-Droid repository
AntiFeatures:
  NonFreeAssets:
    en-US: Depends on Bing Images.
  NonFreeNet:
    en-US: Depends on Bing Images.
Categories:
  - Multimedia
  - Theming
  - Wallpaper
License: MIT
SourceCode: https://github.com/nikescar/bingtray
IssueTracker: https://github.com/nikescar/bingtray/issues

AutoName: Bingtray

RepoType: git
Repo: https://github.com/nikescar/bingtray.git

Builds:
  - versionName: 0.0.6
    versionCode: 239015706
    commit: v0.0.6
    # init: echo 'started init.'
    output: mobile/app/build/outputs/apk/release/app-release.apk
    # prebuild: echo 'started prebuild'
    scanignore:
      - mobile/Cargo.toml
      - bingtray-core/Cargo.toml
      - bingtray/Cargo.toml
      - Cargo.toml
    build:
      - source $HOME/.cargo/env
      - cd mobile
      - cargo ndk -t armeabi-v7a -o app/src/main/jniLibs/ build --release --lib
      - cargo ndk -t arm64-v8a -o app/src/main/jniLibs/ build --release --lib
      - cargo ndk -t x86 -o app/src/main/jniLibs/ build --release --lib
      - cargo ndk -t x86_64 -o app/src/main/jniLibs/ build --release --lib
      - gradle assembleRelease
    # postbuild: echo 'postbuild.'
    # antifeatures:
    #  - NonFreeAssets
    #  - NonFreeNet

AutoUpdateMode: Version v%v
UpdateCheckMode: HTTP
UpdateCheckData: https://api.github.com/repos/nikescar/bingtray/releases/latest|"id":\s*(\d+)|.|"tag_name":\s*"v([^"]+)"
CurrentVersion: 0.0.6
CurrentVersionCode: 239015706